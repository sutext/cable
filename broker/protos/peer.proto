syntax = "proto3";

option go_package = "./protos";

package protos;

message Empty{
}
message IsOnlineReq{
  string uid = 1;
}
message IsOnlineResp{
  bool online = 1;
}

message SendMessageReq{
  int32 flag = 1;
  string target = 2;
  bytes message = 3;
}
message SendMessageResp{
 int32 total = 1;
 int32 success = 2;
}

message KickUserReq{
  string uid = 1;
}
message KickConnReq{
  string cid = 1;
}

message Inspects{
 string id = 1;
 int32 user_count = 2;
 int32 client_count = 3;
 int32 cluster_size = 4;
 int32 channel_count = 5;
}
message ChannelReq{
  string uid = 1;
  repeated string channels = 2;
}
message ChannelResp{
  int32 count = 1;
}

// The greeting service definition.
service PeerService {
  rpc Inspect (Empty) returns (Inspects) {}
  rpc IsOnline (IsOnlineReq) returns (IsOnlineResp) {}
  rpc KickUser (KickUserReq) returns (Empty) {}
  rpc KickConn (KickConnReq) returns (Empty) {}
  rpc SendMessage (SendMessageReq) returns (SendMessageResp) {}
  rpc JoinChannel (ChannelReq) returns (ChannelResp) {}
  rpc LeaveChannel (ChannelReq) returns (ChannelResp) {}
}